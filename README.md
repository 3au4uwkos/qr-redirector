# Ð¡ÐµÑ€Ð²Ð¸Ñ ÐºÐ¾Ñ€Ð¾Ñ‚ÐºÐ¸Ñ… ÑÑÑ‹Ð»Ð¾Ðº Ð¸ QR-ÐºÐ¾Ð´Ð¾Ð²

Ð¡ÐµÑ€Ð²Ð¸Ñ Ð´Ð»Ñ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ ÐºÐ¾Ñ€Ð¾Ñ‚ÐºÐ¸Ñ… ÑÑÑ‹Ð»Ð¾Ðº Ð¸ Ð³ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ð¸ QR-ÐºÐ¾Ð´Ð¾Ð² Ñ Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒÑŽ Ð¾Ñ‚ÑÐ»ÐµÐ¶Ð¸Ð²Ð°Ð½Ð¸Ñ Ð¿ÐµÑ€ÐµÑ…Ð¾Ð´Ð¾Ð².

## ðŸ“Œ ÐžÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚Ð¸

- Ð“ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ñ ÐºÐ¾Ñ€Ð¾Ñ‚ÐºÐ¸Ñ… ÑÑÑ‹Ð»Ð¾Ðº
- Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ QR-ÐºÐ¾Ð´Ð¾Ð² Ð´Ð»Ñ URL
- Ð’Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ñ Ð²Ð²Ð¾Ð´Ð¸Ð¼Ñ‹Ñ… URL
- Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ° Ð¿ÐµÑ€ÐµÑ…Ð¾Ð´Ð¾Ð² Ð¿Ð¾ ÑÑÑ‹Ð»ÐºÐ°Ð¼
- Ð›Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ IP-Ð°Ð´Ñ€ÐµÑÐ¾Ð² Ð¿Ð¾ÑÐµÑ‚Ð¸Ñ‚ÐµÐ»ÐµÐ¹
- AJAX-Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹Ñ Ð±ÐµÐ· Ð¿ÐµÑ€ÐµÐ·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ñ‹

## ðŸ›  Ð¢ÐµÑ…Ð½Ð¾Ð»Ð¾Ð³Ð¸Ð¸

- **Backend**: Yii2 (PHP 8.2)
- **Database**: MySQL 5.7 / MariaDB
- **Frontend**: Bootstrap 5, jQuery
- **QR-Ð³ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ñ**: Endroid/QrCode
- **Ð”ÐµÐ¿Ð»Ð¾Ð¹**: Docker

## ðŸ“¦ Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ°

### Ð¢Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ñ

- Docker Ð¸ Docker Compose
- PHP 8.2 (ÐµÑÐ»Ð¸ Ð·Ð°Ð¿ÑƒÑÐºÐ°ÐµÑ‚Ðµ Ð±ÐµÐ· Docker)

### Ð—Ð°Ð¿ÑƒÑÐº Ñ‡ÐµÑ€ÐµÐ· Docker

1. ÐšÐ»Ð¾Ð½Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹:
   ```bash
   git clone https://github.com/3au4uwkos/qr-redirector.git
   cd qr-redirector
   ```

2. Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ñ‹:
   ```bash
   docker-compose up -d
   ```

3. ÐŸÑ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ð±ÑƒÐ´ÐµÑ‚ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð¾ Ð¿Ð¾ Ð°Ð´Ñ€ÐµÑÑƒ:
   ```
   http://localhost:8000
   ```

### Ð ÑƒÑ‡Ð½Ð°Ñ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ°

1. Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸:
   ```bash
   composer install
   ```

2. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹Ñ‚Ðµ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ Ðº Ð‘Ð” Ð² `config/db.php`

3. ÐŸÑ€Ð¸Ð¼ÐµÐ½Ð¸Ñ‚Ðµ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸:
   ```bash
   php yii migrate
   ```

4. Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ð¿Ð°Ð¿ÐºÑƒ Ð´Ð»Ñ QR-ÐºÐ¾Ð´Ð¾Ð² Ð¸ Ð´Ð°Ð¹Ñ‚Ðµ Ð¿Ñ€Ð°Ð²Ð°:
   ```bash
   mkdir -p web/qr_codes/temp
   chmod -R 777 web/qr_codes
   ```

## ðŸ—ƒ Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ…

ÐŸÑ€Ð¾ÐµÐºÑ‚ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ 3 Ð¾ÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñ‹:

1. **websites** - Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ Ð¾Ñ€Ð¸Ð³Ð¸Ð½Ð°Ð»ÑŒÐ½Ñ‹Ðµ URL Ð¸ ÐºÐ¾Ñ€Ð¾Ñ‚ÐºÐ¸Ðµ ÐºÐ¾Ð´Ñ‹
   - `url` - Ð¾Ñ€Ð¸Ð³Ð¸Ð½Ð°Ð»ÑŒÐ½Ñ‹Ð¹ URL
   - `short_code` - ÐºÐ¾Ñ€Ð¾Ñ‚ÐºÐ¸Ð¹ ÐºÐ¾Ð´ (8 ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð²)
   - `name_of_qr_file` - Ð¸Ð¼Ñ Ñ„Ð°Ð¹Ð»Ð° QR-ÐºÐ¾Ð´Ð°
   - `use_number` - ÑÑ‡ÐµÑ‚Ñ‡Ð¸Ðº Ð¿ÐµÑ€ÐµÑ…Ð¾Ð´Ð¾Ð²

2. **ips** - Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ð¾ Ð¿Ð¾ÑÐµÑ‚Ð¸Ñ‚ÐµÐ»ÑÑ…
   - `ip` - IP-Ð°Ð´Ñ€ÐµÑ
   - `visit_count` - ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð²Ð¸Ð·Ð¸Ñ‚Ð¾Ð²

3. **logs** - Ð»Ð¾Ð³Ð¸ Ð¿ÐµÑ€ÐµÑ…Ð¾Ð´Ð¾Ð²
   - Ð¡Ð²ÑÐ·Ñ‹Ð²Ð°ÐµÑ‚ websites Ð¸ ips
   - `accessed_at` - Ð²Ñ€ÐµÐ¼Ñ Ð¿ÐµÑ€ÐµÑ…Ð¾Ð´Ð°

## ðŸš€ Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ

1. ÐÐ° Ð³Ð»Ð°Ð²Ð½Ð¾Ð¹ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ðµ Ð²Ð²ÐµÐ´Ð¸Ñ‚Ðµ URL Ð² Ð¿Ð¾Ð»Ðµ Ð²Ð²Ð¾Ð´Ð°
2. ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ "ÐžÐš" Ð´Ð»Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ Ð¸ Ð³ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ð¸
3. Ð•ÑÐ»Ð¸ URL Ð²Ð°Ð»Ð¸Ð´ÐµÐ½ Ð¸ Ð´Ð¾ÑÑ‚ÑƒÐ¿ÐµÐ½, Ð²Ñ‹ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚Ðµ:
   - QR-ÐºÐ¾Ð´ (Ð¼Ð¾Ð¶Ð½Ð¾ ÑÐºÐ°Ð½Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ ÐºÐ°Ð¼ÐµÑ€Ð¾Ð¹)
   - ÐšÐ¾Ñ€Ð¾Ñ‚ÐºÑƒÑŽ ÑÑÑ‹Ð»ÐºÑƒ (Ð¼Ð¾Ð¶Ð½Ð¾ ÑÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ)
4. ÐŸÑ€Ð¸ Ð¿ÐµÑ€ÐµÑ…Ð¾Ð´Ðµ Ð¿Ð¾ ÐºÐ¾Ñ€Ð¾Ñ‚ÐºÐ¾Ð¹ ÑÑÑ‹Ð»ÐºÐµ Ð¿Ñ€Ð¾Ð¸Ð·Ð¾Ð¹Ð´ÐµÑ‚ Ñ€ÐµÐ´Ð¸Ñ€ÐµÐºÑ‚ Ð½Ð° Ð¾Ñ€Ð¸Ð³Ð¸Ð½Ð°Ð»ÑŒÐ½Ñ‹Ð¹ URL


## ðŸ” ÐŸÑ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ¸ Ð¿ÐµÑ€ÐµÑ…Ð¾Ð´Ð¾Ð²

### ÐŸÑ€Ð¸ Ñ€Ð°Ð±Ð¾Ñ‚Ðµ Ñ Docker

Ð”Ð»Ñ Ð¿Ñ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€Ð° ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ¸ Ð¿ÐµÑ€ÐµÑ…Ð¾Ð´Ð¾Ð² Ð¿Ð¾ ÐºÐ¾Ñ€Ð¾Ñ‚ÐºÐ¸Ð¼ ÑÑÑ‹Ð»ÐºÐ°Ð¼ Ð²Ñ‹ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒÑÑ Ðº MySQL Ð² ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ðµ:

```bash
docker exec -it db mysql -u qr_user -p qr_db
```
ÐŸÑ€Ð¸ Ð·Ð°Ð¿Ñ€Ð¾ÑÐµ Ð¿Ð°Ñ€Ð¾Ð»Ñ Ð²Ð²ÐµÐ´Ð¸Ñ‚Ðµ: `qr_password` Ð¸Ð»Ð¸ Ð´Ñ€ÑƒÐ³Ð¾Ð¹ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð½Ñ‹Ð¹ Ð’Ð°Ð¼Ð¸ 

### ÐŸÑ€Ð¸ Ñ€ÑƒÑ‡Ð½Ð¾Ð¹ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐµ

Ð’Ñ‹ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð¿Ñ€Ð¾ÑÐ¼Ð°Ñ‚Ñ€Ð¸Ð²Ð°Ñ‚ÑŒ ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÑƒ Ñ‡ÐµÑ€ÐµÐ· Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹Ñ Ð²Ð°ÑˆÐµÐ¹ Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾Ð¹ Ð¡Ð£Ð‘Ð” (phpMyAdmin, MySQL Workbench, DBeaver Ð¸ Ð´Ñ€.):

1. ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÐµÑÑŒ Ðº Ð²Ð°ÑˆÐµÐ¹ MySQL/MariaDB
2. Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð±Ð°Ð·Ñƒ Ð´Ð°Ð½Ð½Ñ‹Ñ… `qr_db` (Ð¸Ð»Ð¸ ÑƒÐºÐ°Ð·Ð°Ð½Ð½ÑƒÑŽ Ð²Ð°Ð¼Ð¸ Ð² Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ°Ñ…)
3. ÐžÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñ‹ Ð´Ð»Ñ Ð°Ð½Ð°Ð»Ð¸Ð·Ð°:
   - `websites` - Ð²ÑÐµ ÑÐ¾Ð·Ð´Ð°Ð½Ð½Ñ‹Ðµ ÑÑÑ‹Ð»ÐºÐ¸
   - `ips` - Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ð¾ Ð¿Ð¾ÑÐµÑ‚Ð¸Ñ‚ÐµÐ»ÑÑ…
   - `logs` - Ð´ÐµÑ‚Ð°Ð»ÑŒÐ½Ð°Ñ Ð¸ÑÑ‚Ð¾Ñ€Ð¸Ñ Ð¿ÐµÑ€ÐµÑ…Ð¾Ð´Ð¾Ð²

## ðŸŒŸ ÐžÑÐ¾Ð±ÐµÐ½Ð½Ð¾ÑÑ‚Ð¸ Ñ€ÐµÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸

- Ð’Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ñ URL Ð½Ð° ÑÑ‚Ð¾Ñ€Ð¾Ð½Ðµ ÑÐµÑ€Ð²ÐµÑ€Ð°
- ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð¾ÑÑ‚Ð¸ Ñ†ÐµÐ»ÐµÐ²Ð¾Ð³Ð¾ Ñ€ÐµÑÑƒÑ€ÑÐ°
- Ð“ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ñ QR-ÐºÐ¾Ð´Ð¾Ð² Ð±ÐµÐ· Ð²Ð½ÐµÑˆÐ½Ð¸Ñ… API
- ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ° Ñ‚ÐµÐ¼Ð½Ð¾Ð¹ Ñ‚ÐµÐ¼Ñ‹ Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹ÑÐ°
- Ð›Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð²ÑÐµÑ… Ð¿ÐµÑ€ÐµÑ…Ð¾Ð´Ð¾Ð² Ñ IP-Ð°Ð´Ñ€ÐµÑÐ°Ð¼Ð¸
- ÐžÐ¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ðµ SQL-Ð·Ð°Ð¿Ñ€Ð¾ÑÑ‹ Ð¸ Ð¸Ð½Ð´ÐµÐºÑÑ‹

## ðŸ”§ ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸

ÐžÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹ Ð¼Ð¾Ð¶Ð½Ð¾ Ð¸Ð·Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ð² Ñ„Ð°Ð¹Ð»Ðµ `config/params.php`:

```php
'qrCodes' => [
    'storagePath' => '@webroot/qr_codes/temp', // ÐŸÑƒÑ‚ÑŒ Ð´Ð»Ñ Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ QR-ÐºÐ¾Ð´Ð¾Ð²
    'webPath' => '@web/qr_codes/temp', // Web-Ð¿ÑƒÑ‚ÑŒ Ðº QR-ÐºÐ¾Ð´Ð°Ð¼
    'lifetime' => 3600 // Ð’Ñ€ÐµÐ¼Ñ Ð¶Ð¸Ð·Ð½Ð¸ ÐºÐµÑˆÐ° (ÑÐµÐº)
]
```

## ðŸ“„ Ð›Ð¸Ñ†ÐµÐ½Ð·Ð¸Ñ

ÐŸÑ€Ð¾ÐµÐºÑ‚ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ Ð»Ð¸Ñ†ÐµÐ½Ð·Ð¸ÑŽ BSD-3-Clause.

---

> Ð Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ð½Ð¾ Matvei Zaitsev | [3au4uwkos@gmail.com](mailto:3au4uwkos@gmail.com)
